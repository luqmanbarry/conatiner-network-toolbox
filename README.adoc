== Dockerfile for network troubleshooting

A ubi8/ubi based container image for troubleshooting network latency in OpenShift/Kubernetes cluster.

* For a list of programs available in the image, look at `packages.txt` in this repository.
* To add more programs, edit the `packages.txt` file. Note the program needs to be compatible with `yum` package management.

===  Invocation Guide

==== Using the image locally

* Invocation format: `sh toolbox.sh _container-runtime_`

[source,bash]
----
sh toolbox.sh podman
----

* Non linux users, to enable *podman* locally, run `podman machine start`


==== Using image within Kubernetes/OpenShift cluster

. Build Image 
+
[source, bash]
----
podman build -t REGISTRY/IMAGE_NAME .
----

. Push Image 
+
[source,bash]
----
podman login -u USERNAME -p PASSWORD REGISTRY
# Use one of these commands
# -- Push with podman
podman push REGISTRY/IMAGE_NAME
# -- Push with docker
docker push REGISTRY/IMAGE_NAME
# -- Push with skopeo
skopeo copy containers-storage:localhost/REGISTRY/IMAGE_NAME docker://REGISTRY/IMAGE_NAME
----

. Launch net-toolbox pod
+
[source,bash]
----
kubectl run net-toolbox  -it --image=REGISTRY/IMAGE_NAME --restart=Never -- /bin/bash
----
